<mat-card>
  <mat-card-header>
    <mat-card-title>New Payment</mat-card-title>
  </mat-card-header>
  <mat-card-content *ngIf="!paymentSucceeded">
    <form #newPayment="ngForm" (ngSubmit)="onSubmit(newPayment)">


      <mat-form-field class="full-width">
        <input matInput placeholder="From" name="from" value="{{from}} [{{balance |currency:' '}} CHF]" disabled/>
      </mat-form-field>

      <mat-form-field hintLabel="{{toLabel}}" class="full-width">
        <input matInput maxlength="7" minlength="7" pattern="\d{7}" placeholder="To" name="target" type="number" ngModel
               (ngModelChange)="lookUpTo($event, newPayment)" required/>
      </mat-form-field>

      <mat-form-field hintLabel="Please enter amount rounded to 5 centimes." class="full-width">
        <input matInput pattern="\d+(.\d[0,5])?" placeholder="Amount" name="amount" type="number" ngModel required/>
      </mat-form-field>

      <button [disabled]="newPayment.form.invalid" mat-raised-button>Pay</button>

    </form>
  </mat-card-content>
  <mat-card-content *ngIf="paymentSucceeded">
    <p>Transaction to {{target}} succeeded!</p>
    <p>New balance is {{balance|currency:' '}}CHF</p>
    <button mat-raised-button (click)="paymentSucceeded=!paymentSucceeded">Start over</button>
  </mat-card-content>
</mat-card>

